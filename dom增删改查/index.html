<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css\css.css">
    <script src="../bz/jquery.js"></script>
    <title>Document</title>
    <style>
        input {
            width: 100px;
        }

        td {
            width: 200px;
        }

        #sd {
            display: none;
        }
    </style>
</head>

<body>
    <table class="table">
        <thead>
            <tr>
                <th>起飞1</th>
                <th>起飞2</th>
                <th>起飞3</th>
                <th>起飞4</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <!-- 模板 -->
            <tr id="sd">
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
            <tr>
                <td>芜湖8</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>芜湖</td>
                <td>
                    <button class="add">添加</button>
                    <button class="del">删除</button>
                </td>
            </tr>
        </tbody>
    </table>
</body>
<script>
    //获取所有td标签对象
    var td = $("tbody td");
    //获取模板
    var cs = $("#sd");
    //td的点击事件
    td.click(function () {
        //点击的不为 添加或删除按钮
        if ($(this).children().length == 0) {
            //生成一个input标签
            var input = $("<input type='text'>");
            //将文字放在input的val里面
            input.val($(this).html());
            //将文字设置为空
            $(this).html("");
            //将input 添加到 点击的位置
            $(this).append(input);
            //获取焦点
            input.focus();
            //传this
            var _this = $(this);
            //失去焦点
            input.blur(function () {
                //失去焦点的input失效
                _this.html($(this).val());
            })
        }
    }) 
    //添加
    var add = $(".add");
    //删除
    var del = $(".del");
    //点击添加
    add.click(function () {
        //克隆模板 clone传true 克隆他的事件
        var clone1 = cs.clone(true);
        //将id名取消
        clone1.attr("id","");
        //将克隆对象添加到所点击添加的tr之前
        $(this).parent().parent().before(clone1);
    })
    //点击删除
    del.click(function () {
        //删除所点击的tr
        $(this).parent().parent().remove();
    })
    // //获取每个td
    // var sds;
    // var td = document.querySelectorAll(".table td");
    // var del = document.querySelectorAll(".del");
    // var addd = document.querySelectorAll(".add");
    // var mb = document.querySelector("#sd");
    // console.log(addd);
    // var tbody = document.querySelector("tbody");
    // console.log(tbody)
    // var add = 0;
    // var st = true;
    // //父级绑事件        //形参随便写
    // tbody.onclick = function(e){
    //     //e.target 获取当前点击的元素 this指向被破坏
    //     //锁 多次点击无效
    //     if(st){
    //         //如果点是除 删除添加之外的
    //     if(e.target.children.length == 0 && e.target.className != "add"&&e.target.className != "del"){
    //         st = false;
    //         //生成一个input
    //                 var input = document.createElement("input");
    //                 //变量保存当前的内容
    //                  var s = e.target.innerHTML;
    //                  //将点击的内容为设置空
    //                  e.target.innerHTML = "";
    //                  //将内容传给input 
    //                  input.value = s;
    //                  //给当前点击的元素添加input
    //                  e.target.appendChild(input);
    //                  //默认焦点
    //                 input.focus();
    //                 //失去焦点
    //                 input.onblur = function (){
    //                     //将input内容传给 当前点击的innerHTML
    //                     e.target.innerHTML = this.value; 
    //                     //失去焦点时节流关闭
    //                     st = true;
    //                 }
    //             }
    //     }
    //     //点击添加
    //     if(e.target.className == "add"){
    //         //克隆模板
    //         var t = mb.cloneNode("tr");
    //         //将他id名字去掉 这样就能显示出来了
    //         t.id = "";
    //         //添加到点击的父级元素之前
    //          //父级       //要添加的内容  //要添加的位置
    //         tbody.insertBefore(t, e.target.parentNode.parentNode);
    //     }
    //     //点击删除
    //     if(e.target.className == "del"){
    //         //父级              //要删除的元素
    //          tbody.removeChild(e.target.parentNode.parentNode);
    //     }
    // }

//////////  方法1  //////////////

    //删除事件
    // for(var i = 0 ; i < del.length; i++){
    //     del[i].onclick = function(){
    //         var pp = this.parentNode.parentNode;
    //         tbody.removeChild(pp);
    //     }
    // }
    // //添加事件
    // for(var i = 0; i < addd.length; i++){
    //     addd[i].onclick = function (){
    //         var t = sd.cloneNode("tr");
    //         t.id = "";
    //         tbody.insertBefore(t,this.parentNode.parentNode);
        //     var tr = document.createElement("tr");
        //   for(var j = 0; j < 5; j++){
        //       var td = document.createElement("td");
        //       tr.appendChild(td);
        //   }
        //   var butadd = document.createElement("button");
        //   var butdel = document.createElement("button");
        //   butadd.innerHTML = "添加";
        //   butdel.innerHTML = "删除";
        //   tr.children[tr.children.length-1].appendChild(butadd);
        //   tr.children[tr.children.length-1].appendChild(butdel);
        //   tbody.insertBefore(tr, this.parentNode.parentNode);
        //   console.log(tr)
    //     }

    // }
    //给每个td添加点击事件
    // for(var i = 0; i < td.length; i++){
    //     td[i].onclick = function(){
    //         //节流
    //         if(st){
    //             //最后一个添加删除的tr长度为2 不添加input
    //             if(this.children.length != 2){
    //                 st = false;
    //                 sds = this;
    //                 //保存td中的字
    //                 var ad = this.innerHTML;
    //                 //将td中的内容设置为空
    //                 this.innerHTML = ""; 
    //                 //每点击一次生成一个input标签 
    //                 var input = document.createElement("input");
    //                     //将input添加到td中
    //                 this.appendChild(input);
    //                 //将input里的内容改成原来td中的字
    //                 input.value = ad;
    //                 //点击后让input 立即获得焦点 可以输入
    //                 input.focus();
    //                 input.onblur = function (){
    //                     sds.innerHTML = this.value; 
    //                     //失去焦点时节流关闭
    //                     st = true;
    //                 }
    //             }
    //         } 
    //     }
    // }

</script>

</html>